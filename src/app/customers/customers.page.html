<!-- TÄMÄ ON banneri-->
<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title class="atra">ATRA</ion-title>
  </ion-toolbar>
</ion-header>

<!--TÄMÄ ON ASIAKASSIVU-->
<ion-content [fullscreen]="true">
  <!--Menee myös asiakasboksien ympärille-->

  <div class="flex-1 p-6 text-neutral-950 text-center space-y-2 ">
    <h2 class="text-4xl font-pt-serif text-neutral-50">Customers</h2>
    <h3 class="font-lato text-neutral-50">Your customers and their information</h3>

    <!--Jos searchbarin ulkoasua muokkaa, pitää tehdä style-elementin sisällä -->
    <ion-searchbar style=" --color: white;" placeholder="Search" [(ngModel)]="searchItem"></ion-searchbar>

  </div>

  <div class="flex">
    <button (click)="addNew()"
      class="flex-1 items-center gap-2 px-4 py-4 mx-30 my-2 bg-slate-700 text-neutral-50 font-lato border border-neutral-50/80 rounded-full">

      <span class="text-l">
        +
      </span>
      <span>Add new
      </span>

    </button>
  </div>

  <!--JOKAINEN ASIAKAS OMASSA BOKSISSAAN-->
  @for (customer of filteredCustomers(); track customer.email) {
  <div class="flex flex-col bg-slate-900 border border-neutral-50/60 rounded-xl my-4 ">
    <div class="p-3 md:p-5 ">
      <h3 class="text-lg font-lato text-neutral-50 dark:text-white">{{customer.last_name}}, {{customer.first_name}}
      </h3>
      <p class="mt-2 font-lato text-gray-500 dark:text-neutral-400">{{customer.email}}</p>
    </div>
    <button class="bg-slate-200 text-neutral-50 font-lato text-l py-2 px-4 rounded-2xl my-2 mx-30">
      <a (click)="chooseCustomer(true, customer)">Open </a></button>
  </div>
  }

</ion-content>


<ion-modal id="example-modal" [isOpen]="isModalOpen" (didDismiss)="setClosed(false)">

  <ng-template>
    <div class="flex items-center justify-center w-95% h-90%">
      <div class="bg-slate-900 text-neutral-50 rounded-3xl p-6 w-full shadow-lg border border-white/10">
        <h2 class="text-center text-3xl font-pt-serif mb-6">Customer</h2>
        <!--Tähän saa Milja tehtyä tyylit sekä elementteihin yksittäisenä-->
        <div class="flex gap-3">
          <div class="w-1/2">
            <label for="first-name" class="block mb-1 text-lg font-lato text-neutral-50">First Name</label>
            <input type="text" name="first-name" id="first-name"
              class="bg-slate-700 border border-gray-300 text-gray-50 text-sm rounded-lg focus:ring-slate-500 focus:border-slate-500 block w-full p-2.5"
              placeholder="First Name" required [(ngModel)]="chosenCustomer.first_name">
          </div>

          <div class="w-1/2">
            <label for="last-name" class="block mb-1 text-lg font-lato text-neutral-50">Last Name</label>
            <input type="text" name="last-name" id="last-name"
              class="bg-slate-700 border border-gray-300 text-gray-50 text-sm rounded-lg focus:ring-slate-500 focus:border-slate-500 block w-full p-2.5"
              placeholder="Last Name" required [(ngModel)]="chosenCustomer.last_name">
          </div>
        </div>

        <div class="flex gap-3">
          <div class="w-1/2">
            <label for="email" class="block mb-1 text-lg font-lato text-neutral-50">Email</label>
            <input type="email" name="email" id="email"
              class="bg-slate-700 border border-gray-300 text-gray-50 text-sm rounded-lg focus:ring-slate-500 focus:border-slate-500 block w-full p-2.5"
              placeholder="Email" required [(ngModel)]="chosenCustomer.email">
          </div>
          <div class="w-1/2">
            <label for="phone-number" class="block mb-1 text-lg font-lato text-neutral-50">Phone Number</label>
            <input type="text" name="phone-number" id="phone-number"
              class="bg-slate-700 border border-gray-300 text-gray-50 text-sm rounded-lg focus:ring-slate-500 focus:border-slate-500 block w-full p-2.5"
              placeholder="Phone Number" required [(ngModel)]="chosenCustomer.phone">
          </div>
        </div>
        <div>
          <label for="notes" class="block mb-1 text-lg font-lato text-neutral-50">Notes</label>
          <input type="text" id="notes" [(ngModel)]="chosenCustomer.notes"
            class="block p-2.5 w-full text-sm text-gray-200 bg-slate-700 rounded-lg border border-gray-300 focus:ring-slate-500 focus:border-slate-500"
            placeholder="Write your comments about customer here.." />
        </div>
        <div class="flex justify-end space-x-3 pt-2">
          <button type="button"
            class="text-red-600 inline-flex items-center hover:text-neutral-50 border border-red-600 hover:bg-red-600 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-4 py-2 text-center"
            (click)="deleteCustomer()">
            <svg class="w-5 h-5 mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
                clip-rule="evenodd"></path>
            </svg>
            Delete
          </button>

          <button type="submit"
            class="text-neutral-50 bg-slate-700 hover:bg-slate-500 focus:ring-4 focus:outline-none focus:ring-slate-400 font-medium rounded-lg text-sm px-4 py-2 text-center"
            (click)="updateCustomer()">
            Update
          </button>
        </div>
        <button
          class="text-neutral-50 bg-slate-700 hover:bg-slate-500 focus:ring-4 focus:outline-none focus:ring-slate-400 font-medium rounded-lg text-sm px-4 py-2 text-center">
          <a (click)="setClosed(false)">Close</a></button>


      </div>
    </div>
  </ng-template>

</ion-modal>