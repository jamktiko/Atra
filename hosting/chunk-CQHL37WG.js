import{a as N}from"./chunk-5HSAN7ZQ.js";import{D as o,Da as W,E as v,F as g,G as x,J as I,K as E,L as P,N as O,X as y,aa as T,f as _,g as h,ga as k,i as l,j as f,k as b,ka as L,l as w,oa as V,pa as A,q as M,r as S,s as c,t as i,u as t,w as C,x as d,xa as D,y as p,ya as F}from"./chunk-OSKTXYQY.js";import"./chunk-Y2PDZ72K.js";import"./chunk-GOEAN3WI.js";import"./chunk-SNC2IU6J.js";import"./chunk-5SDHGKAM.js";import"./chunk-BXPB4ZAG.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-REYR55MP.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var j=(s,a)=>a.customer_id;function B(s,a){if(s&1){let r=C();i(0,"div",3)(1,"h3"),o(2),t(),i(3,"p"),o(4),t(),i(5,"button")(6,"a",7),d("click",function(){let n=_(r).$implicit,m=p();return h(m.chooseCustomer(!0,n))}),o(7,"Open "),t()()()}if(s&2){let r=a.$implicit;l(2),x("",r.last_name,", ",r.first_name),l(2),v(r.email)}}function H(s,a){if(s&1){let r=C();i(0,"div",8)(1,"h1"),o(2),t(),i(3,"p"),o(4),t(),i(5,"p"),o(6),t(),i(7,"p"),o(8,"Related entries:"),t(),i(9,"li"),o(10,"List here!"),t(),i(11,"button",9)(12,"a",7),d("click",function(){_(r);let n=p();return h(n.setClosed(!1))}),o(13,"Close"),t()()()}if(s&2){let r=p();l(2),x("",r.chosenCustomer.last_name,", ",r.chosenCustomer.first_name),l(2),g("Email: ",r.chosenCustomer.email),l(2),g("Phonenumber: ",r.chosenCustomer.phone)}}var U=(()=>{let a=class a{constructor(e){this.apiService=e,this.searchItem="",this.isModalOpen=!1}filteredCustomers(){let e=this.searchItem.toLowerCase();return this.allcustomers.filter(n=>n.first_name.toLowerCase().includes(e)||n.last_name.toLowerCase().includes(e)||n.email.toLocaleLowerCase().includes(e)||n.phone.includes(e))}chooseCustomer(e,n){this.isModalOpen=e,this.chosenCustomer=n}setClosed(e){this.isModalOpen=e}ngOnInit(){this.apiService.getAllCustomers().subscribe({next:e=>{this.allcustomers=e},error:e=>{console.error("Pieleen m\xE4n, ",e)}})}};a.\u0275fac=function(n){return new(n||a)(f(N))},a.\u0275cmp=b({type:a,selectors:[["app-customers"]],decls:16,vars:4,consts:[[3,"translucent"],[1,"atra"],[3,"fullscreen"],[1,"bg-blue-800","my-2"],["animated","true","placeholder","Search",2,"--background","#3b82f6","--color","white",3,"ngModelChange","ngModel"],["tab","customers/addnewcustomer","href","tabs/customers/addnewcustomer"],["id","example-modal",3,"didDismiss","isOpen"],[3,"click"],[1,"wrapper"],[1,"bg-blue-600"]],template:function(n,m){n&1&&(i(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),o(3,"ATRA"),t()()(),i(4,"ion-content",2)(5,"div",3)(6,"h2"),o(7,"Customers"),t(),i(8,"ion-searchbar",4),P("ngModelChange",function(u){return E(m.searchItem,u)||(m.searchItem=u),u}),t(),i(9,"button")(10,"a",5),o(11,"Add new "),t()()(),M(12,B,8,3,"div",3,j),t(),i(14,"ion-modal",6),d("didDismiss",function(){return m.setClosed(!1)}),w(15,H,14,4,"ng-template"),t()),n&2&&(c("translucent",!0),l(4),c("fullscreen",!0),l(4),I("ngModel",m.searchItem),l(4),S(m.allcustomers),l(2),c("isOpen",m.isModalOpen))},dependencies:[V,A,D,F,O,k,y,T,W,L],styles:["ion-modal#example-modal[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{margin-bottom:10px}ion-modal#example-modal[_ngcontent-%COMP%]{--width: fit-content;--min-width: 250px;--height: fit-content;--border-radius: 6px;--box-shadow: 0 28px 48px rgba(0, 0, 0, .4)}ion-modal#example-modal[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:20px 20px 10px}.box[_ngcontent-%COMP%]{background:#00005d}"]});let s=a;return s})();export{U as CustomersPage};
