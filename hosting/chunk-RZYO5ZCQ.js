import{a as q}from"./chunk-6SMXSMI5.js";import{a as j}from"./chunk-5HSAN7ZQ.js";import{$ as c,D as d,Da as B,E as M,H as P,J as A,K as E,L as T,M as V,N as F,W as O,X as L,Z as f,aa as R,f as u,fa as z,g as p,ga as D,h as C,i as s,j as x,k as v,ma as G,n as k,o as w,oa as N,q as I,r as S,ra as W,s as g,t as i,u as l,v as y,w as b,x as h,y as m}from"./chunk-OSKTXYQY.js";import"./chunk-Y2PDZ72K.js";import"./chunk-GOEAN3WI.js";import"./chunk-SNC2IU6J.js";import"./chunk-5SDHGKAM.js";import"./chunk-BXPB4ZAG.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-REYR55MP.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var $=(o,a)=>a.id;function H(o,a){if(o&1){let r=b();i(0,"app-modalink",9),h("cancel",function(){u(r);let n=m();return p(n.handleCancel())})("delete",function(n){u(r);let t=m();return p(t.handleDelete(n))}),l()}if(o&2){let r=m();g("chosenInks",r.getChosenInks())}}function J(o,a){if(o&1){let r=b();i(0,"div",5),y(1,"img",10),d(2),i(3,"input",11),h("click",function(){let n=u(r).$implicit,t=m();return p(t.chooseInk(n))}),l()()}if(o&2){let r=a.$implicit;s(),g("src",V(r.image_url),C),s(),P(" ",r.product_name," - ",r.manufacturer," - ",r.color," ")}}function K(o,a){if(o&1&&(i(0,"div")(1,"ion-badge"),d(2),l(),i(3,"ion-label"),d(4," Inks chosen"),l()()),o&2){let r=m();s(2),M(r.getChosenInks().length)}}var oe=(()=>{let a=class a{constructor(e){this.apiService=e,this.searchItem="",this.showReview=!1,this.inkGroup=new f({chosenInks:new z([])})}ngOnInit(){this.apiService.getAllPublicInks().subscribe({next:e=>{this.publicInks=e,console.log(e)},error:e=>{console.error("Something went wrong: ",e)}})}review(){this.showReview=!0}filteredInks(){let e=this.searchItem.toLowerCase();return this.publicInks.filter(n=>n.product_name.toLowerCase().includes(e)||n.color.toLowerCase().includes(e)||n.manufacturer.toLowerCase().includes(e))}getChosenInks(){return this.inkGroup.get("chosenInks")}chooseInk(e){let n=this.getChosenInks();n.value.some(t=>t.id===e.ink_id)?(console.log("Ink already chosen: ",e.ink_id),console.log(n.value)):(n.push(new f({ink_id:new c(e.ink_id),product_name:new c(e.product_name),manufacturer:new c(e.manufacturer),color:new c(e.color),recalled:new c(e.recalled),image_url:new c(e.image_url),size:new c(e.size),batchnumber:new c("",O.required)})),console.log(n.value))}handleCancel(){this.showReview=!1}handleDelete(e){let n=this.inkGroup.get("chosenInks"),t=n.value.indexOf(e);t>-1&&(n.removeAt(t),console.log("Removed ink: ",e,"New chosenInks: ",n.value))}};a.\u0275fac=function(n){return new(n||a)(x(j))},a.\u0275cmp=v({type:a,selectors:[["app-addnewink"]],decls:18,vars:4,consts:[["fullscreen","true"],[3,"chosenInks"],[1,"box2"],["animated","true","placeholder","Search",2,"--background","#3b82f6","--color","white",3,"ngModelChange","ngModel"],[1,"scrollable"],[1,"bg-blue-800","my-2"],[1,"bg-blue-800","mx-2"],["tab","tabs/inks","href","tabs/inks"],[1,"bg-blue-800","mx-2",3,"click","disabled"],[3,"cancel","delete","chosenInks"],["width","20%",3,"src"],["type","button","value","Choose ink",1,"bg-blue-400","mx-2",3,"click"]],template:function(n,t){n&1&&(i(0,"ion-content",0),k(1,H,1,1,"app-modalink",1),i(2,"div",2)(3,"h1"),d(4,"Adding a new ink to your library"),l(),i(5,"h3"),d(6,"Start by searching for inks"),l(),i(7,"ion-searchbar",3),T("ngModelChange",function(_){return E(t.searchItem,_)||(t.searchItem=_),_}),l()(),i(8,"div",4),I(9,J,4,5,"div",5,$),l(),i(11,"div"),k(12,K,5,1,"div"),i(13,"button",6)(14,"a",7),d(15,"Cancel"),l()(),i(16,"button",8),h("click",function(){return t.review()}),d(17,"Continue"),l()()()),n&2&&(s(),w(t.showReview?1:-1),s(6),A("ngModel",t.searchItem),s(2),S(t.filteredInks()),s(3),w(t.getChosenInks().length>0?12:-1),s(4),g("disabled",t.getChosenInks().length<1))},dependencies:[N,F,D,L,R,B,q,G,W],styles:[".box[_ngcontent-%COMP%]{background-color:#404481;padding:.5em;margin:.5em}.scrollable[_ngcontent-%COMP%]{max-height:50vh;overflow-y:auto;padding:.5rem;border:1px solid #ccc;border-radius:6px;margin:1rem 0}.box2[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;z-index:10;padding:.5rem;background-color:#000}.box3[_ngcontent-%COMP%]{text-align:center;background:#000}.btn[_ngcontent-%COMP%]{background-color:#0c226b;border-radius:10px;padding:5px;margin:2px}"]});let o=a;return o})();export{oe as AddnewinkPage};
